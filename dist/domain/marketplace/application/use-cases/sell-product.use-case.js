'use strict';function a40_0x20a9(_0xb81995,_0x3aeacf){const _0x955ded=a40_0x955d();return a40_0x20a9=function(_0x20a953,_0x233b36){_0x20a953=_0x20a953-0xff;let _0x1fdd20=_0x955ded[_0x20a953];return _0x1fdd20;},a40_0x20a9(_0xb81995,_0x3aeacf);}const a40_0x3e7dcb=a40_0x20a9;(function(_0x584ec4,_0x81a03){const _0xcdec59=a40_0x20a9,_0x46582f=_0x584ec4();while(!![]){try{const _0x20cf9f=-parseInt(_0xcdec59(0x116))/0x1*(parseInt(_0xcdec59(0x125))/0x2)+parseInt(_0xcdec59(0x10d))/0x3*(-parseInt(_0xcdec59(0x121))/0x4)+-parseInt(_0xcdec59(0x111))/0x5*(parseInt(_0xcdec59(0x11e))/0x6)+-parseInt(_0xcdec59(0x10c))/0x7*(parseInt(_0xcdec59(0x122))/0x8)+-parseInt(_0xcdec59(0x114))/0x9+parseInt(_0xcdec59(0x123))/0xa*(-parseInt(_0xcdec59(0x119))/0xb)+parseInt(_0xcdec59(0x10e))/0xc*(parseInt(_0xcdec59(0x109))/0xd);if(_0x20cf9f===_0x81a03)break;else _0x46582f['push'](_0x46582f['shift']());}catch(_0x5cdb5f){_0x46582f['push'](_0x46582f['shift']());}}}(a40_0x955d,0xccd78));function a40_0x955d(){const _0xdefeba=['11130453FXeKMX','metadata','99349NgOonJ','productsRepository','getOwnPropertyDescriptor','9118945SQUEfL','Seller','../repositories/products.repository','__esModule','function','1153284fsSExc','__metadata','IDs','2090168phbyjm','25336dojscj','20sHrKyw','../repositories/sellers.repository','22ueRQrd','Attachment','design:paramtypes','SellersRepository','Category','categoryRepository','../repositories/categories.repository','priceInCents','findById','SellProductUseCase','join','length','../../enterprise/entities/product','__decorate','defineProperty','categoryId','ProductsRepository','object','ResourceNotFoundError','attachmentsIds','sellersRepository','ownerId','left','AttachmentsRepository','../../../../core/logic/either','11167403sNCwLl','right','../repositories/attachments.repository','1043tTCiVl','3vtAuSn','84wPdEdy','Product','description','5olHebk','create','@nestjs/common'];a40_0x955d=function(){return _0xdefeba;};return a40_0x955d();}var __decorate=this&&this[a40_0x3e7dcb(0x132)]||function(_0x1da815,_0x4f0228,_0x328c22,_0x405273){const _0x5f1822=a40_0x3e7dcb;var _0x1ed3ba=arguments[_0x5f1822(0x130)],_0x1c69b7=_0x1ed3ba<0x3?_0x4f0228:_0x405273===null?_0x405273=Object[_0x5f1822(0x118)](_0x4f0228,_0x328c22):_0x405273,_0x438bd9;if(typeof Reflect===_0x5f1822(0x101)&&typeof Reflect['decorate']===_0x5f1822(0x11d))_0x1c69b7=Reflect['decorate'](_0x1da815,_0x4f0228,_0x328c22,_0x405273);else{for(var _0x236e96=_0x1da815[_0x5f1822(0x130)]-0x1;_0x236e96>=0x0;_0x236e96--)if(_0x438bd9=_0x1da815[_0x236e96])_0x1c69b7=(_0x1ed3ba<0x3?_0x438bd9(_0x1c69b7):_0x1ed3ba>0x3?_0x438bd9(_0x4f0228,_0x328c22,_0x1c69b7):_0x438bd9(_0x4f0228,_0x328c22))||_0x1c69b7;}return _0x1ed3ba>0x3&&_0x1c69b7&&Object[_0x5f1822(0x133)](_0x4f0228,_0x328c22,_0x1c69b7),_0x1c69b7;},__metadata=this&&this[a40_0x3e7dcb(0x11f)]||function(_0x2e6dd5,_0x36c3e0){const _0x3aea5e=a40_0x3e7dcb;if(typeof Reflect===_0x3aea5e(0x101)&&typeof Reflect[_0x3aea5e(0x115)]==='function')return Reflect[_0x3aea5e(0x115)](_0x2e6dd5,_0x36c3e0);};Object[a40_0x3e7dcb(0x133)](exports,a40_0x3e7dcb(0x11c),{'value':!![]}),exports['SellProductUseCase']=void 0x0;const common_1=require(a40_0x3e7dcb(0x113)),either_1=require(a40_0x3e7dcb(0x108)),attachments_repository_1=require(a40_0x3e7dcb(0x10b)),categories_repository_1=require(a40_0x3e7dcb(0x12b)),products_repository_1=require(a40_0x3e7dcb(0x11b)),sellers_repository_1=require(a40_0x3e7dcb(0x124)),resource_not_found_error_1=require('./errors/resource-not-found.error'),product_1=require(a40_0x3e7dcb(0x131));let SellProductUseCase=class SellProductUseCase{constructor(_0x4daf17,_0x46dba3,_0x101b36,_0x3ff3fe){const _0x427fe1=a40_0x3e7dcb;this[_0x427fe1(0x104)]=_0x4daf17,this[_0x427fe1(0x12a)]=_0x46dba3,this[_0x427fe1(0x117)]=_0x101b36,this['attachmentsRepository']=_0x3ff3fe;}async['execute'](_0x130572){const _0x41d5fd=a40_0x3e7dcb,_0xf7a4cd=await this[_0x41d5fd(0x104)][_0x41d5fd(0x12d)](_0x130572[_0x41d5fd(0x105)]);if(!_0xf7a4cd)return(0x0,either_1['left'])(new resource_not_found_error_1[(_0x41d5fd(0x102))](_0x41d5fd(0x11a),'ID',_0x130572['ownerId']));const _0x201a2b=await this[_0x41d5fd(0x12a)][_0x41d5fd(0x12d)](_0x130572[_0x41d5fd(0xff)]);if(!_0x201a2b)return(0x0,either_1[_0x41d5fd(0x106)])(new resource_not_found_error_1[(_0x41d5fd(0x102))](_0x41d5fd(0x129),'ID',_0x130572[_0x41d5fd(0xff)]));const _0x1fb575=await this['attachmentsRepository']['findManyByIds'](_0x130572[_0x41d5fd(0x103)]);if(_0x1fb575['inexistentIds'][_0x41d5fd(0x130)])return(0x0,either_1[_0x41d5fd(0x106)])(new resource_not_found_error_1[(_0x41d5fd(0x102))](_0x41d5fd(0x126),_0x41d5fd(0x120),_0x1fb575['inexistentIds'][_0x41d5fd(0x12f)](',\x20')));const _0x508c26=product_1[_0x41d5fd(0x10f)][_0x41d5fd(0x112)]({'owner':_0xf7a4cd,'title':_0x130572['title'],'description':_0x130572[_0x41d5fd(0x110)],'priceInCents':_0x130572[_0x41d5fd(0x12c)],'attachments':_0x1fb575['data'],'category':_0x201a2b});return await this[_0x41d5fd(0x117)][_0x41d5fd(0x112)](_0x508c26),(0x0,either_1[_0x41d5fd(0x10a)])({'product':_0x508c26});}};exports[a40_0x3e7dcb(0x12e)]=SellProductUseCase,exports[a40_0x3e7dcb(0x12e)]=SellProductUseCase=__decorate([(0x0,common_1['Injectable'])(),__metadata(a40_0x3e7dcb(0x127),[sellers_repository_1[a40_0x3e7dcb(0x128)],categories_repository_1['CategoriesRepository'],products_repository_1[a40_0x3e7dcb(0x100)],attachments_repository_1[a40_0x3e7dcb(0x107)]])],SellProductUseCase);