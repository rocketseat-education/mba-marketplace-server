'use strict';const a39_0x5cb0a0=a39_0x11be;(function(_0xc81d0c,_0x42a6a8){const _0x41bb72=a39_0x11be,_0x3424b4=_0xc81d0c();while(!![]){try{const _0x617e9=-parseInt(_0x41bb72(0x90))/0x1*(-parseInt(_0x41bb72(0xa7))/0x2)+parseInt(_0x41bb72(0xab))/0x3+-parseInt(_0x41bb72(0xa2))/0x4*(parseInt(_0x41bb72(0xa4))/0x5)+-parseInt(_0x41bb72(0x96))/0x6*(parseInt(_0x41bb72(0x99))/0x7)+parseInt(_0x41bb72(0x9e))/0x8+parseInt(_0x41bb72(0x9c))/0x9*(parseInt(_0x41bb72(0xa3))/0xa)+-parseInt(_0x41bb72(0x95))/0xb;if(_0x617e9===_0x42a6a8)break;else _0x3424b4['push'](_0x3424b4['shift']());}catch(_0x43ac24){_0x3424b4['push'](_0x3424b4['shift']());}}}(a39_0x3639,0xd6f14));var __decorate=this&&this['__decorate']||function(_0x24790b,_0x1a327e,_0x102796,_0x31730b){const _0x3e4acb=a39_0x11be;var _0x1aa5d8=arguments[_0x3e4acb(0x94)],_0x22afc0=_0x1aa5d8<0x3?_0x1a327e:_0x31730b===null?_0x31730b=Object[_0x3e4acb(0x8e)](_0x1a327e,_0x102796):_0x31730b,_0x9e979;if(typeof Reflect===_0x3e4acb(0x91)&&typeof Reflect[_0x3e4acb(0x86)]===_0x3e4acb(0x98))_0x22afc0=Reflect[_0x3e4acb(0x86)](_0x24790b,_0x1a327e,_0x102796,_0x31730b);else{for(var _0x10bdd1=_0x24790b[_0x3e4acb(0x94)]-0x1;_0x10bdd1>=0x0;_0x10bdd1--)if(_0x9e979=_0x24790b[_0x10bdd1])_0x22afc0=(_0x1aa5d8<0x3?_0x9e979(_0x22afc0):_0x1aa5d8>0x3?_0x9e979(_0x1a327e,_0x102796,_0x22afc0):_0x9e979(_0x1a327e,_0x102796))||_0x22afc0;}return _0x1aa5d8>0x3&&_0x22afc0&&Object[_0x3e4acb(0xa8)](_0x1a327e,_0x102796,_0x22afc0),_0x22afc0;},__metadata=this&&this['__metadata']||function(_0x160f84,_0x11b37b){const _0x4adeab=a39_0x11be;if(typeof Reflect===_0x4adeab(0x91)&&typeof Reflect[_0x4adeab(0xa0)]==='function')return Reflect[_0x4adeab(0xa0)](_0x160f84,_0x11b37b);};function a39_0x11be(_0x1236ce,_0x13a160){const _0x363947=a39_0x3639();return a39_0x11be=function(_0x11be75,_0x7f07df){_0x11be75=_0x11be75-0x7d;let _0x20755c=_0x363947[_0x11be75];return _0x20755c;},a39_0x11be(_0x1236ce,_0x13a160);}function a39_0x3639(){const _0x5c5a18=['View','248tevDqj','object','../../../../core/errors/common/not-allowed.error','@nestjs/common','length','837815GRboqz','6mbdPlc','../repositories/viewers.repository','function','2442930USQKWu','viewsRepository','ViewersRepository','54GPPGsV','Viewer','4839080fkqbLq','equals','metadata','productId','176EccOfC','416140NRNAfX','17195AcoYRo','create','right','54zmgbra','defineProperty','../repositories/views.repository','NotAllowedError','1786830xTtWhl','viewersRepository','findById','Views\x20cannot\x20be\x20registered\x20by\x20the\x20product\x20owner','execute','Injectable','./errors/resource-not-found.error','productsRepository','__esModule','RegisterViewUseCase','../../enterprise/entities/view','left','decorate','design:paramtypes','ResourceNotFoundError','ViewsRepository','owner','isViewed','viewerId','ProductsRepository','getOwnPropertyDescriptor'];a39_0x3639=function(){return _0x5c5a18;};return a39_0x3639();}Object[a39_0x5cb0a0(0xa8)](exports,a39_0x5cb0a0(0x82),{'value':!![]}),exports[a39_0x5cb0a0(0x83)]=void 0x0;const common_1=require(a39_0x5cb0a0(0x93)),not_allowed_error_1=require(a39_0x5cb0a0(0x92)),either_1=require('../../../../core/logic/either'),products_repository_1=require('../repositories/products.repository'),viewers_repository_1=require(a39_0x5cb0a0(0x97)),views_repository_1=require(a39_0x5cb0a0(0xa9)),resource_not_found_error_1=require(a39_0x5cb0a0(0x80)),view_1=require(a39_0x5cb0a0(0x84));let RegisterViewUseCase=class RegisterViewUseCase{constructor(_0x2dff5c,_0x3d58be,_0x45691e){const _0x15024c=a39_0x5cb0a0;this[_0x15024c(0x81)]=_0x2dff5c,this[_0x15024c(0xac)]=_0x3d58be,this['viewsRepository']=_0x45691e;}async[a39_0x5cb0a0(0x7e)](_0x4842fb){const _0xa818a5=a39_0x5cb0a0,[_0x35a772,_0x598b8c]=await Promise['all']([this[_0xa818a5(0x81)][_0xa818a5(0xad)](_0x4842fb['productId']),this['viewersRepository'][_0xa818a5(0xad)](_0x4842fb['viewerId'])]);if(!_0x35a772)return(0x0,either_1[_0xa818a5(0x85)])(new resource_not_found_error_1[(_0xa818a5(0x88))]('Product','ID',_0x4842fb[_0xa818a5(0xa1)]));if(!_0x598b8c)return(0x0,either_1[_0xa818a5(0x85)])(new resource_not_found_error_1[(_0xa818a5(0x88))](_0xa818a5(0x9d),'ID',_0x4842fb[_0xa818a5(0x8c)]));if(_0x35a772[_0xa818a5(0x8a)][_0xa818a5(0x9f)](_0x598b8c))return(0x0,either_1[_0xa818a5(0x85)])(new not_allowed_error_1[(_0xa818a5(0xaa))](_0xa818a5(0x7d)));const _0x32e9dc=view_1[_0xa818a5(0x8f)][_0xa818a5(0xa5)]({'product':_0x35a772,'viewer':_0x598b8c}),_0x14a083=await this[_0xa818a5(0x9a)][_0xa818a5(0x8b)](_0x32e9dc);if(_0x14a083)return(0x0,either_1[_0xa818a5(0xa6)])({'view':_0x32e9dc});else await this[_0xa818a5(0x9a)][_0xa818a5(0xa5)](_0x32e9dc);return(0x0,either_1[_0xa818a5(0xa6)])({'view':_0x32e9dc});}};exports[a39_0x5cb0a0(0x83)]=RegisterViewUseCase,exports[a39_0x5cb0a0(0x83)]=RegisterViewUseCase=__decorate([(0x0,common_1[a39_0x5cb0a0(0x7f)])(),__metadata(a39_0x5cb0a0(0x87),[products_repository_1[a39_0x5cb0a0(0x8d)],viewers_repository_1[a39_0x5cb0a0(0x9b)],views_repository_1[a39_0x5cb0a0(0x89)]])],RegisterViewUseCase);