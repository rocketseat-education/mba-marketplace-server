'use strict';const a42_0x3cf3b7=a42_0x47aa;function a42_0xf47c(){const _0x32fbc8=['__metadata','function','1qGIYjs','Attachment','map','3rudHNB','files','../../enterprise/entities/attachment','right','createMany','execute','decorate','../../../../core/logic/either','create','5260585lrUbPr','length','../storage/uploader','10zkwkXb','29176YrqFei','384212DAYNwL','1992088wanNDg','design:paramtypes','getOwnPropertyDescriptor','247024ZquARd','UploadAttachmentUseCase','upload','@nestjs/common','135kBtfdi','__decorate','attachmentsRepository','all','../repositories/attachments.repository','defineProperty','__esModule','AttachmentsRepository','1672398EdEDWo','metadata','2366920XNXktv','uploader','Injectable'];a42_0xf47c=function(){return _0x32fbc8;};return a42_0xf47c();}(function(_0x32fab9,_0x1e3513){const _0x5c7aea=a42_0x47aa,_0xfb05c4=_0x32fab9();while(!![]){try{const _0x112e13=parseInt(_0x5c7aea(0x1ed))/0x1*(parseInt(_0x5c7aea(0x202))/0x2)+parseInt(_0x5c7aea(0x1f0))/0x3*(parseInt(_0x5c7aea(0x1fe))/0x4)+-parseInt(_0x5c7aea(0x1e8))/0x5+parseInt(_0x5c7aea(0x20e))/0x6+-parseInt(_0x5c7aea(0x1ff))/0x7+-parseInt(_0x5c7aea(0x1fd))/0x8*(-parseInt(_0x5c7aea(0x206))/0x9)+-parseInt(_0x5c7aea(0x1fc))/0xa*(-parseInt(_0x5c7aea(0x1f9))/0xb);if(_0x112e13===_0x1e3513)break;else _0xfb05c4['push'](_0xfb05c4['shift']());}catch(_0x12e499){_0xfb05c4['push'](_0xfb05c4['shift']());}}}(a42_0xf47c,0x42b76));var __decorate=this&&this[a42_0x3cf3b7(0x207)]||function(_0x3812f2,_0x378e0c,_0x1c663c,_0x53762f){const _0x2b8f92=a42_0x3cf3b7;var _0x19744e=arguments[_0x2b8f92(0x1fa)],_0x483c35=_0x19744e<0x3?_0x378e0c:_0x53762f===null?_0x53762f=Object[_0x2b8f92(0x201)](_0x378e0c,_0x1c663c):_0x53762f,_0x455ad5;if(typeof Reflect==='object'&&typeof Reflect[_0x2b8f92(0x1f6)]==='function')_0x483c35=Reflect['decorate'](_0x3812f2,_0x378e0c,_0x1c663c,_0x53762f);else{for(var _0x4a33ab=_0x3812f2['length']-0x1;_0x4a33ab>=0x0;_0x4a33ab--)if(_0x455ad5=_0x3812f2[_0x4a33ab])_0x483c35=(_0x19744e<0x3?_0x455ad5(_0x483c35):_0x19744e>0x3?_0x455ad5(_0x378e0c,_0x1c663c,_0x483c35):_0x455ad5(_0x378e0c,_0x1c663c))||_0x483c35;}return _0x19744e>0x3&&_0x483c35&&Object[_0x2b8f92(0x20b)](_0x378e0c,_0x1c663c,_0x483c35),_0x483c35;},__metadata=this&&this[a42_0x3cf3b7(0x1eb)]||function(_0x338b87,_0x388891){const _0xe7578e=a42_0x3cf3b7;if(typeof Reflect==='object'&&typeof Reflect[_0xe7578e(0x20f)]===_0xe7578e(0x1ec))return Reflect[_0xe7578e(0x20f)](_0x338b87,_0x388891);};Object[a42_0x3cf3b7(0x20b)](exports,a42_0x3cf3b7(0x20c),{'value':!![]}),exports[a42_0x3cf3b7(0x203)]=void 0x0;function a42_0x47aa(_0x53bd68,_0x2ae41f){const _0xf47c55=a42_0xf47c();return a42_0x47aa=function(_0x47aa0f,_0x4a0e39){_0x47aa0f=_0x47aa0f-0x1e8;let _0x432b55=_0xf47c55[_0x47aa0f];return _0x432b55;},a42_0x47aa(_0x53bd68,_0x2ae41f);}const common_1=require(a42_0x3cf3b7(0x205)),either_1=require(a42_0x3cf3b7(0x1f7)),attachments_repository_1=require(a42_0x3cf3b7(0x20a)),uploader_1=require(a42_0x3cf3b7(0x1fb)),attachment_1=require(a42_0x3cf3b7(0x1f2));let UploadAttachmentUseCase=class UploadAttachmentUseCase{constructor(_0x4580a1,_0x297cee){const _0x333182=a42_0x3cf3b7;this[_0x333182(0x208)]=_0x4580a1,this['uploader']=_0x297cee;}async[a42_0x3cf3b7(0x1f5)](_0x403508){const _0x3ecbe8=a42_0x3cf3b7,_0x423130=await Promise[_0x3ecbe8(0x209)](_0x403508[_0x3ecbe8(0x1f1)][_0x3ecbe8(0x1ef)](_0x462aca=>this[_0x3ecbe8(0x1e9)][_0x3ecbe8(0x204)]({'file':_0x462aca}))),_0x37c915=_0x423130['map'](_0x40abe0=>{const _0x476200=_0x3ecbe8;return attachment_1[_0x476200(0x1ee)][_0x476200(0x1f8)]({'path':_0x40abe0['path']});});return await this[_0x3ecbe8(0x208)][_0x3ecbe8(0x1f4)](_0x37c915),(0x0,either_1[_0x3ecbe8(0x1f3)])({'attachments':_0x37c915});}};exports[a42_0x3cf3b7(0x203)]=UploadAttachmentUseCase,exports[a42_0x3cf3b7(0x203)]=UploadAttachmentUseCase=__decorate([(0x0,common_1[a42_0x3cf3b7(0x1ea)])(),__metadata(a42_0x3cf3b7(0x200),[attachments_repository_1[a42_0x3cf3b7(0x20d)],uploader_1['Uploader']])],UploadAttachmentUseCase);