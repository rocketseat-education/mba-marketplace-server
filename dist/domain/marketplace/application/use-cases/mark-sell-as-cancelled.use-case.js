'use strict';const a36_0x2e13fa=a36_0x310e;(function(_0x29b8f2,_0x42c6c4){const _0x206867=a36_0x310e,_0x2dfaf5=_0x29b8f2();while(!![]){try{const _0x3a14d4=parseInt(_0x206867(0x11f))/0x1*(-parseInt(_0x206867(0x10f))/0x2)+-parseInt(_0x206867(0x126))/0x3*(parseInt(_0x206867(0x10d))/0x4)+parseInt(_0x206867(0x101))/0x5+parseInt(_0x206867(0x10b))/0x6+-parseInt(_0x206867(0x117))/0x7+-parseInt(_0x206867(0xfa))/0x8*(parseInt(_0x206867(0x112))/0x9)+parseInt(_0x206867(0xfc))/0xa*(parseInt(_0x206867(0x11d))/0xb);if(_0x3a14d4===_0x42c6c4)break;else _0x2dfaf5['push'](_0x2dfaf5['shift']());}catch(_0xb3964){_0x2dfaf5['push'](_0x2dfaf5['shift']());}}}(a36_0x6c82,0xed7e5));var __decorate=this&&this[a36_0x2e13fa(0xf9)]||function(_0x22a968,_0x2fd744,_0x43cf00,_0x238417){const _0xafd3f5=a36_0x2e13fa;var _0x56892d=arguments[_0xafd3f5(0x10a)],_0x27c7f5=_0x56892d<0x3?_0x2fd744:_0x238417===null?_0x238417=Object[_0xafd3f5(0x11e)](_0x2fd744,_0x43cf00):_0x238417,_0x3c1e20;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0xafd3f5(0x106))_0x27c7f5=Reflect['decorate'](_0x22a968,_0x2fd744,_0x43cf00,_0x238417);else{for(var _0x1bb769=_0x22a968[_0xafd3f5(0x10a)]-0x1;_0x1bb769>=0x0;_0x1bb769--)if(_0x3c1e20=_0x22a968[_0x1bb769])_0x27c7f5=(_0x56892d<0x3?_0x3c1e20(_0x27c7f5):_0x56892d>0x3?_0x3c1e20(_0x2fd744,_0x43cf00,_0x27c7f5):_0x3c1e20(_0x2fd744,_0x43cf00))||_0x27c7f5;}return _0x56892d>0x3&&_0x27c7f5&&Object[_0xafd3f5(0xfe)](_0x2fd744,_0x43cf00,_0x27c7f5),_0x27c7f5;},__metadata=this&&this[a36_0x2e13fa(0x114)]||function(_0x169b7d,_0x561ce3){const _0x8db959=a36_0x2e13fa;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x8db959(0x106))return Reflect[_0x8db959(0x119)](_0x169b7d,_0x561ce3);};Object[a36_0x2e13fa(0xfe)](exports,a36_0x2e13fa(0x108),{'value':!![]}),exports[a36_0x2e13fa(0x10e)]=void 0x0;function a36_0x310e(_0x239674,_0x2a3ca3){const _0x6c82ab=a36_0x6c82();return a36_0x310e=function(_0x310e32,_0x3db359){_0x310e32=_0x310e32-0xf9;let _0x2b7cf0=_0x6c82ab[_0x310e32];return _0x2b7cf0;},a36_0x310e(_0x239674,_0x2a3ca3);}const common_1=require(a36_0x2e13fa(0x125)),not_allowed_error_1=require(a36_0x2e13fa(0x124)),either_1=require('../../../../core/logic/either'),products_repository_1=require(a36_0x2e13fa(0x10c)),sellers_repository_1=require(a36_0x2e13fa(0xfd)),resource_not_found_error_1=require('./errors/resource-not-found.error'),product_1=require(a36_0x2e13fa(0x123));let MarkSellAsCancelledUseCase=class MarkSellAsCancelledUseCase{constructor(_0x1d66aa,_0x48b9b0){const _0x28f4e1=a36_0x2e13fa;this['sellersRepository']=_0x1d66aa,this[_0x28f4e1(0x115)]=_0x48b9b0;}async['execute'](_0x19b1da){const _0x2f5675=a36_0x2e13fa,[_0x31ea7f,_0x45179a]=await Promise['all']([this['sellersRepository'][_0x2f5675(0x120)](_0x19b1da[_0x2f5675(0x110)]),this[_0x2f5675(0x115)][_0x2f5675(0x120)](_0x19b1da['productId'])]);if(!_0x31ea7f)return(0x0,either_1[_0x2f5675(0x116)])(new resource_not_found_error_1['ResourceNotFoundError']('Seller','ID',_0x19b1da['ownerId']));if(!_0x45179a)return(0x0,either_1[_0x2f5675(0x116)])(new resource_not_found_error_1['ResourceNotFoundError']('Product','ID',_0x19b1da[_0x2f5675(0x109)]));if(!_0x45179a[_0x2f5675(0x105)]['id'][_0x2f5675(0x118)](_0x31ea7f['id']))return(0x0,either_1[_0x2f5675(0x116)])(new not_allowed_error_1[(_0x2f5675(0x111))](_0x2f5675(0x107)));if(_0x45179a[_0x2f5675(0x102)]===product_1[_0x2f5675(0x103)][_0x2f5675(0x100)][_0x2f5675(0x11a)])return(0x0,either_1[_0x2f5675(0x116)])(new not_allowed_error_1[(_0x2f5675(0x111))](_0x2f5675(0x11b)));if(_0x45179a[_0x2f5675(0x102)]===product_1[_0x2f5675(0x103)][_0x2f5675(0x100)][_0x2f5675(0x104)])return(0x0,either_1[_0x2f5675(0x116)])(new not_allowed_error_1[(_0x2f5675(0x111))](_0x2f5675(0x113)));return _0x45179a[_0x2f5675(0x102)]=product_1[_0x2f5675(0x103)]['Status'][_0x2f5675(0x11a)],await this[_0x2f5675(0x115)][_0x2f5675(0x121)](_0x45179a),(0x0,either_1[_0x2f5675(0x127)])({'product':_0x45179a});}};exports['MarkSellAsCancelledUseCase']=MarkSellAsCancelledUseCase,exports[a36_0x2e13fa(0x10e)]=MarkSellAsCancelledUseCase=__decorate([(0x0,common_1[a36_0x2e13fa(0xfb)])(),__metadata(a36_0x2e13fa(0x11c),[sellers_repository_1[a36_0x2e13fa(0xff)],products_repository_1[a36_0x2e13fa(0x122)]])],MarkSellAsCancelledUseCase);function a36_0x6c82(){const _0x2d6f7a=['CANCELLED','This\x20product\x20is\x20already\x20cancelled.','design:paramtypes','11KxzNsf','getOwnPropertyDescriptor','36oiZtbn','findById','save','ProductsRepository','../../enterprise/entities/product','../../../../core/errors/common/not-allowed.error','@nestjs/common','2019isSRPT','right','__decorate','6232064VNZZfQ','Injectable','7039070TjyRKk','../repositories/sellers.repository','defineProperty','SellersRepository','Status','3984335rWUtzw','status','Product','SOLD','owner','function','You\x20are\x20not\x20the\x20owner\x20of\x20this\x20product.','__esModule','productId','length','10507002Oydxyy','../repositories/products.repository','3688tLCzCX','MarkSellAsCancelledUseCase','21364yArOGK','ownerId','NotAllowedError','9bNeYXb','You\x20cannot\x20cancel\x20a\x20sold\x20product.','__metadata','productsRepository','left','3465714ZFVSmh','equals','metadata'];a36_0x6c82=function(){return _0x2d6f7a;};return a36_0x6c82();}