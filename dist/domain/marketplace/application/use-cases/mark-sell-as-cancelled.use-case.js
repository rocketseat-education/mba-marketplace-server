'use strict';const a36_0x3ca0db=a36_0x2234;(function(_0x44f627,_0xb18211){const _0x492e29=a36_0x2234,_0x3f1e1d=_0x44f627();while(!![]){try{const _0xd2c906=-parseInt(_0x492e29(0x156))/0x1+-parseInt(_0x492e29(0x135))/0x2*(parseInt(_0x492e29(0x150))/0x3)+parseInt(_0x492e29(0x144))/0x4*(-parseInt(_0x492e29(0x133))/0x5)+parseInt(_0x492e29(0x146))/0x6+-parseInt(_0x492e29(0x137))/0x7*(parseInt(_0x492e29(0x142))/0x8)+-parseInt(_0x492e29(0x129))/0x9+parseInt(_0x492e29(0x148))/0xa;if(_0xd2c906===_0xb18211)break;else _0x3f1e1d['push'](_0x3f1e1d['shift']());}catch(_0x46f0a7){_0x3f1e1d['push'](_0x3f1e1d['shift']());}}}(a36_0x59cc,0x2f278));var __decorate=this&&this[a36_0x3ca0db(0x13c)]||function(_0x27a1c5,_0x5c3f4e,_0x498dae,_0x2ec5ea){const _0x16b1c1=a36_0x3ca0db;var _0x340c1c=arguments[_0x16b1c1(0x134)],_0x27b0b5=_0x340c1c<0x3?_0x5c3f4e:_0x2ec5ea===null?_0x2ec5ea=Object[_0x16b1c1(0x13b)](_0x5c3f4e,_0x498dae):_0x2ec5ea,_0x14c547;if(typeof Reflect===_0x16b1c1(0x12a)&&typeof Reflect['decorate']==='function')_0x27b0b5=Reflect[_0x16b1c1(0x12e)](_0x27a1c5,_0x5c3f4e,_0x498dae,_0x2ec5ea);else{for(var _0x492f5e=_0x27a1c5[_0x16b1c1(0x134)]-0x1;_0x492f5e>=0x0;_0x492f5e--)if(_0x14c547=_0x27a1c5[_0x492f5e])_0x27b0b5=(_0x340c1c<0x3?_0x14c547(_0x27b0b5):_0x340c1c>0x3?_0x14c547(_0x5c3f4e,_0x498dae,_0x27b0b5):_0x14c547(_0x5c3f4e,_0x498dae))||_0x27b0b5;}return _0x340c1c>0x3&&_0x27b0b5&&Object[_0x16b1c1(0x13f)](_0x5c3f4e,_0x498dae,_0x27b0b5),_0x27b0b5;},__metadata=this&&this['__metadata']||function(_0x119477,_0x2928ea){const _0x56bb73=a36_0x3ca0db;if(typeof Reflect===_0x56bb73(0x12a)&&typeof Reflect[_0x56bb73(0x13e)]===_0x56bb73(0x138))return Reflect[_0x56bb73(0x13e)](_0x119477,_0x2928ea);};Object[a36_0x3ca0db(0x13f)](exports,a36_0x3ca0db(0x154),{'value':!![]}),exports[a36_0x3ca0db(0x139)]=void 0x0;function a36_0x2234(_0x1e37f4,_0x2a9eeb){const _0x59cc14=a36_0x59cc();return a36_0x2234=function(_0x22340f,_0x47f234){_0x22340f=_0x22340f-0x129;let _0x27b594=_0x59cc14[_0x22340f];return _0x27b594;},a36_0x2234(_0x1e37f4,_0x2a9eeb);}const common_1=require('@nestjs/common'),not_allowed_error_1=require(a36_0x3ca0db(0x13a)),either_1=require(a36_0x3ca0db(0x143)),products_repository_1=require(a36_0x3ca0db(0x12f)),sellers_repository_1=require(a36_0x3ca0db(0x12c)),resource_not_found_error_1=require('./errors/resource-not-found.error'),product_1=require(a36_0x3ca0db(0x14d));let MarkSellAsCancelledUseCase=class MarkSellAsCancelledUseCase{constructor(_0x1d2ff3,_0x33f927){const _0x5200ef=a36_0x3ca0db;this['sellersRepository']=_0x1d2ff3,this[_0x5200ef(0x147)]=_0x33f927;}async[a36_0x3ca0db(0x14c)](_0x17e195){const _0x177803=a36_0x3ca0db,[_0x76d7dd,_0x27894e]=await Promise['all']([this[_0x177803(0x151)][_0x177803(0x140)](_0x17e195[_0x177803(0x132)]),this[_0x177803(0x147)]['findById'](_0x17e195[_0x177803(0x153)])]);if(!_0x76d7dd)return(0x0,either_1[_0x177803(0x136)])(new resource_not_found_error_1[(_0x177803(0x14a))](_0x177803(0x14e),'ID',_0x17e195[_0x177803(0x132)]));if(!_0x27894e)return(0x0,either_1['left'])(new resource_not_found_error_1['ResourceNotFoundError'](_0x177803(0x149),'ID',_0x17e195['productId']));if(!_0x27894e[_0x177803(0x14b)]['id']['equals'](_0x76d7dd['id']))return(0x0,either_1[_0x177803(0x136)])(new not_allowed_error_1[(_0x177803(0x152))]('You\x20are\x20not\x20the\x20owner\x20of\x20this\x20product.'));if(_0x27894e[_0x177803(0x12b)]===product_1[_0x177803(0x149)][_0x177803(0x130)]['CANCELLED'])return(0x0,either_1['left'])(new not_allowed_error_1['NotAllowedError'](_0x177803(0x141)));if(_0x27894e['status']===product_1[_0x177803(0x149)][_0x177803(0x130)][_0x177803(0x12d)])return(0x0,either_1[_0x177803(0x136)])(new not_allowed_error_1[(_0x177803(0x152))](_0x177803(0x131)));return _0x27894e[_0x177803(0x12b)]=product_1['Product'][_0x177803(0x130)]['CANCELLED'],await this[_0x177803(0x147)][_0x177803(0x14f)](_0x27894e),(0x0,either_1[_0x177803(0x13d)])({'product':_0x27894e});}};function a36_0x59cc(){const _0x20e8b9=['MarkSellAsCancelledUseCase','../../../../core/errors/common/not-allowed.error','getOwnPropertyDescriptor','__decorate','right','metadata','defineProperty','findById','This\x20product\x20is\x20already\x20cancelled.','48FmEgGO','../../../../core/logic/either','4hwAFmy','design:paramtypes','1470690HmReTl','productsRepository','12844830xvsAWI','Product','ResourceNotFoundError','owner','execute','../../enterprise/entities/product','Seller','save','3BYyOFb','sellersRepository','NotAllowedError','productId','__esModule','Injectable','331591MBqqFI','1004094JzIMSP','object','status','../repositories/sellers.repository','SOLD','decorate','../repositories/products.repository','Status','You\x20cannot\x20cancel\x20a\x20sold\x20product.','ownerId','1645045ybdkrL','length','746772iEbUUk','left','222719QkpKff','function'];a36_0x59cc=function(){return _0x20e8b9;};return a36_0x59cc();}exports[a36_0x3ca0db(0x139)]=MarkSellAsCancelledUseCase,exports[a36_0x3ca0db(0x139)]=MarkSellAsCancelledUseCase=__decorate([(0x0,common_1[a36_0x3ca0db(0x155)])(),__metadata(a36_0x3ca0db(0x145),[sellers_repository_1['SellersRepository'],products_repository_1['ProductsRepository']])],MarkSellAsCancelledUseCase);