'use strict';const a37_0x476fa8=a37_0x29d3;function a37_0x29d3(_0x45de05,_0x25ab0c){const _0x55cbf2=a37_0x55cb();return a37_0x29d3=function(_0x29d3ac,_0x595396){_0x29d3ac=_0x29d3ac-0x11d;let _0x3af3c4=_0x55cbf2[_0x29d3ac];return _0x3af3c4;},a37_0x29d3(_0x45de05,_0x25ab0c);}(function(_0x820235,_0x5db13d){const _0x5591ee=a37_0x29d3,_0x10055c=_0x820235();while(!![]){try{const _0x412b93=-parseInt(_0x5591ee(0x149))/0x1+parseInt(_0x5591ee(0x14c))/0x2*(-parseInt(_0x5591ee(0x139))/0x3)+parseInt(_0x5591ee(0x150))/0x4+parseInt(_0x5591ee(0x126))/0x5*(-parseInt(_0x5591ee(0x143))/0x6)+parseInt(_0x5591ee(0x138))/0x7*(-parseInt(_0x5591ee(0x147))/0x8)+-parseInt(_0x5591ee(0x152))/0x9*(-parseInt(_0x5591ee(0x120))/0xa)+parseInt(_0x5591ee(0x131))/0xb*(parseInt(_0x5591ee(0x125))/0xc);if(_0x412b93===_0x5db13d)break;else _0x10055c['push'](_0x10055c['shift']());}catch(_0x36abc2){_0x10055c['push'](_0x10055c['shift']());}}}(a37_0x55cb,0xb0e4a));var __decorate=this&&this[a37_0x476fa8(0x14e)]||function(_0x157bda,_0x6d278,_0x507ccc,_0x5c72d4){const _0x8f9d61=a37_0x476fa8;var _0x4bad1f=arguments[_0x8f9d61(0x133)],_0x44072a=_0x4bad1f<0x3?_0x6d278:_0x5c72d4===null?_0x5c72d4=Object[_0x8f9d61(0x14d)](_0x6d278,_0x507ccc):_0x5c72d4,_0x5820f3;if(typeof Reflect===_0x8f9d61(0x132)&&typeof Reflect[_0x8f9d61(0x12e)]==='function')_0x44072a=Reflect[_0x8f9d61(0x12e)](_0x157bda,_0x6d278,_0x507ccc,_0x5c72d4);else{for(var _0x5dda7d=_0x157bda['length']-0x1;_0x5dda7d>=0x0;_0x5dda7d--)if(_0x5820f3=_0x157bda[_0x5dda7d])_0x44072a=(_0x4bad1f<0x3?_0x5820f3(_0x44072a):_0x4bad1f>0x3?_0x5820f3(_0x6d278,_0x507ccc,_0x44072a):_0x5820f3(_0x6d278,_0x507ccc))||_0x44072a;}return _0x4bad1f>0x3&&_0x44072a&&Object[_0x8f9d61(0x145)](_0x6d278,_0x507ccc,_0x44072a),_0x44072a;},__metadata=this&&this[a37_0x476fa8(0x129)]||function(_0x5728e1,_0x574fd7){const _0x5e8ed2=a37_0x476fa8;if(typeof Reflect===_0x5e8ed2(0x132)&&typeof Reflect[_0x5e8ed2(0x11e)]===_0x5e8ed2(0x137))return Reflect[_0x5e8ed2(0x11e)](_0x5728e1,_0x574fd7);};Object[a37_0x476fa8(0x145)](exports,a37_0x476fa8(0x121),{'value':!![]}),exports[a37_0x476fa8(0x136)]=void 0x0;const common_1=require('@nestjs/common'),not_allowed_error_1=require(a37_0x476fa8(0x13e)),either_1=require(a37_0x476fa8(0x12c)),products_repository_1=require('../repositories/products.repository'),sellers_repository_1=require(a37_0x476fa8(0x140)),resource_not_found_error_1=require(a37_0x476fa8(0x13a)),product_1=require(a37_0x476fa8(0x11d));let MarkSellAsSoldUseCase=class MarkSellAsSoldUseCase{constructor(_0x4a9010,_0x5dedd2){const _0x47b9a1=a37_0x476fa8;this[_0x47b9a1(0x12d)]=_0x4a9010,this[_0x47b9a1(0x13f)]=_0x5dedd2;}async[a37_0x476fa8(0x123)](_0xe5cb7e){const _0x4bde73=a37_0x476fa8,[_0x310f25,_0x3cbf23]=await Promise[_0x4bde73(0x122)]([this[_0x4bde73(0x12d)][_0x4bde73(0x14f)](_0xe5cb7e[_0x4bde73(0x148)]),this['productsRepository'][_0x4bde73(0x14f)](_0xe5cb7e[_0x4bde73(0x128)])]);if(!_0x310f25)return(0x0,either_1[_0x4bde73(0x14b)])(new resource_not_found_error_1[(_0x4bde73(0x13d))](_0x4bde73(0x13b),'ID',_0xe5cb7e['ownerId']));if(!_0x3cbf23)return(0x0,either_1['left'])(new resource_not_found_error_1[(_0x4bde73(0x13d))](_0x4bde73(0x142),'ID',_0xe5cb7e['productId']));if(!_0x3cbf23[_0x4bde73(0x144)]['id'][_0x4bde73(0x12a)](_0x310f25['id']))return(0x0,either_1[_0x4bde73(0x14b)])(new not_allowed_error_1[(_0x4bde73(0x151))](_0x4bde73(0x146)));if(_0x3cbf23[_0x4bde73(0x11f)]===product_1['Product'][_0x4bde73(0x134)][_0x4bde73(0x135)])return(0x0,either_1[_0x4bde73(0x14b)])(new not_allowed_error_1['NotAllowedError'](_0x4bde73(0x12f)));if(_0x3cbf23[_0x4bde73(0x11f)]===product_1[_0x4bde73(0x142)][_0x4bde73(0x134)][_0x4bde73(0x13c)])return(0x0,either_1[_0x4bde73(0x14b)])(new not_allowed_error_1['NotAllowedError'](_0x4bde73(0x124)));return _0x3cbf23[_0x4bde73(0x11f)]=product_1['Product']['Status'][_0x4bde73(0x135)],await this[_0x4bde73(0x13f)][_0x4bde73(0x14a)](_0x3cbf23),(0x0,either_1['right'])({'product':_0x3cbf23});}};exports[a37_0x476fa8(0x136)]=MarkSellAsSoldUseCase,exports[a37_0x476fa8(0x136)]=MarkSellAsSoldUseCase=__decorate([(0x0,common_1[a37_0x476fa8(0x127)])(),__metadata(a37_0x476fa8(0x141),[sellers_repository_1[a37_0x476fa8(0x12b)],products_repository_1[a37_0x476fa8(0x130)]])],MarkSellAsSoldUseCase);function a37_0x55cb(){const _0x19b0a5=['status','130pNDusO','__esModule','all','execute','You\x20cannot\x20sell\x20a\x20cancelled\x20product.','84lNXkHS','5HoRBNJ','Injectable','productId','__metadata','equals','SellersRepository','../../../../core/logic/either','sellersRepository','decorate','This\x20product\x20is\x20already\x20sold.','ProductsRepository','2200957ZRDPOb','object','length','Status','SOLD','MarkSellAsSoldUseCase','function','2386349ZetevZ','1893TnWAfc','./errors/resource-not-found.error','Seller','CANCELLED','ResourceNotFoundError','../../../../core/errors/common/not-allowed.error','productsRepository','../repositories/sellers.repository','design:paramtypes','Product','638604kBdjOz','owner','defineProperty','You\x20are\x20not\x20the\x20owner\x20of\x20this\x20product.','8pgzvIz','ownerId','1401270sHrmhL','save','left','3522NuAxAL','getOwnPropertyDescriptor','__decorate','findById','3422944tbfnzW','NotAllowedError','988623JbwuCp','../../enterprise/entities/product','metadata'];a37_0x55cb=function(){return _0x19b0a5;};return a37_0x55cb();}